From 6e94f50a0f1c327b6150117512cc1ff18f31dfc9 Mon Sep 17 00:00:00 2001
From: Oleksandr Tyshchenko <oleksandr_tyshchenko@epam.com>
Date: Mon, 27 Mar 2023 20:52:07 +0300
Subject: [PATCH] Proccess an image in case of DRM as well (out_fb is not set)

It was checked with "rgb32" only.

Signed-off-by: Oleksandr Tyshchenko <oleksandr_tyshchenko@epam.com>
---
 capture.c | 2 --
 1 file changed, 2 deletions(-)

diff --git a/capture.c b/capture.c
index 827a1f1..71c2a4e 100644
--- a/capture.c
+++ b/capture.c
@@ -169,7 +169,6 @@ static void process_image(const void *p, int size, int dev)
         if (out_buf)
                 fwrite(p, size, 1, stdout);
 
-        if (out_fb) {
             if (!strncmp(format_name, "rgb32", 5) | !strncmp(format_name, "raw10", 5)) {
 					int i;
 					int offset = (WIDTH*4)*(dev%(n_devs > 4 ? 4 : 2)) + (HEIGHT*modeset_list->stride)*(dev/(n_devs > 4 ? 4 : 2));
@@ -244,7 +243,6 @@ static void process_image(const void *p, int size, int dev)
             } else {
                 fprintf(stderr, "format not supported to stream to Framebuffer\n");
             }
-        }
 }
 
 static int read_frame(int dev)
-- 
2.34.1


